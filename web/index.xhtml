<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui" 
      xmlns:ui="http://java.sun.com/jsf/facelets" 
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <meta http-equiv="content-type" content="text/html; charset-utf-8"/>
        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximun-scale=1.0, minimun-scale=1.0"/>

        <title>Lista 2-12</title>
        <link rel="stylesheet" href="css/style.css"/>  
        <link rel="stylesheet" href="css/bootstrap.min.css"/> 
        <link href="css/font-awesome.min.css" rel="stylesheet"/> 
        <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
        <link rel="shortcut icon" href="../images/favicon.ico" type="image/x-icon"/> 
        <style type="text/css"></style> 
        <meta property="og:image"              content="https://s24.postimg.org/w3p7mmf8l/img_facebook.png" />
        <meta property="og:title"              content="Sabías que tú puedes crear una LEY" />
        <meta property="og:description"        content="Si tu ley es la más votada, me comprometo a Gestionar su Desarrollo y Cumplimiento" />
        <meta property="og:image:type"         content="image/jpg"/>
        <meta property="og:site_name"          content="Lista 2 - 12"/>
    </h:head>
    <h:body>
        <script>

            //  <![CDATA[
            window.fbAsyncInit = function () {
                FB.init({
                    appId: '213965922343302',
                    xfbml: true,
                    version: 'v2.8'
                });
            };
            function share(nombre) {
                FB.ui(
                        {
                            method: 'feed',
                            link: 'http://www.mipropialey.com',
                            name: nombre,
                            description: 'Si tu ley es la más votada, me comprometo a Gestionar su Desarrollo y Cumplimiento',
                            caption: 'ARQ. EDUARDO GRANIZO, ASAMBLEÍSTA POR CHIMBORAZO',
                            action_type: 'og.likes',
                            action_properties: JSON.stringify({
                                object: 'http://www.mipropialey.com'
                            })
                        }, function (response) {
                });
            }

            function shareLey(ley_) {
                FB.ui(
                        {
                            method: 'feed',
                            link: 'http://www.mipropialey.com',
                            name: ley_,
                            description: 'Si tu ley es la más votada, me comprometo a Gestionar su Desarrollo y Cumplimiento',
                            caption: 'ARQ. EDUARDO GRANIZO, ASAMBLEÍSTA POR CHIMBORAZO',
                            action_type: 'og.likes',
                            action_properties: JSON.stringify({
                                object: 'http://www.mipropialey.com'
                            })
                        }, function (response) {
                });
            }
            function limpiarForm()
            {
                document.getElementById("frmLey").reset();
            }


            (function (d, s, id) {
                var js, fjs = d.getElementsByTagName(s)[0];
                if (d.getElementById(id)) {
                    return;
                }
                js = d.createElement(s);
                js.id = id;
                js.src = "https://connect.facebook.net/en_US/sdk.js";
                fjs.parentNode.insertBefore(js, fjs);
            }(document, 'script', 'facebook-jssdk'));

            $(document).ready(function () {
                $('#btnIngresarLey').click(function () {
                    $.blockUI({css: {
                            border: 'none',
                            padding: '15px',
                            backgroundColor: '#000',
                            '-webkit-border-radius': '10px',
                            '-moz-border-radius': '10px',
                            opacity: .5,
                            color: '#fff'
                        }});

                    setTimeout($.unblockUI, 2000);
                });
            });
            //]]>         
        </script>
        <div class="view">
            <div class="intro-text container">
                <div class="intro-heading row">
                    <div class="col-md-6 col-md-offset-5 col-sm-8 col-sm-offset-4 col-xs-10 col-xs-offset-2">
                        ¿Sabías que TÚ <br/>puedes crear una ley?
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 col-md-offset-6 col-sm-8 col-sm-offset-4 col-xs-10 col-xs-offset-2">
                        ¡Y la misma puede ser realidad con el apoyo de la lista 2-12!
                    </div>
                </div>
                <div class="row inicio">
                    <div class="col-md-4 col-xs-7 col-md-offset-8 col-xs-offset-4">
                        <a href="#area"> 
                            <img src="images/p2_empezar.png" class="img-responsive"/>
                        </a>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3 col-xs-8 col-md-offset-9 col-xs-offset-4 ">                        
                        <img src="images/UP-ID.png" class="img-responsive"/>                    
                    </div>
                </div>
            </div>
        </div>
        <section id="area">
            <div class="view2">
                <div class="container text-center cont-2" >
                    <div class="row heading">
                        <div class="col-lg-12 ">
                            <h2>Elige el área de tú interés <br/> en la que quieres aplicar tu ley </h2>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 col-centered col-sm-4 col-xs-11 col-md-offset-2 col-sm-offset-2">
                            <a href="#formula">
                                <img src="images/educacion.png" class="img-responsive"/>
                            </a>
                        </div> 
                        <div class="col-md-4 col-centered col-sm-4 col-xs-11 ">
                            <a href="#formula">
                                <img src="images/trabajo.png" class="img-responsive"/>
                            </a>
                        </div>

                    </div>
                    <div class="row row-last">
                        <div class="col-md-4 col-centered col-sm-4 col-xs-11 col-md-offset-2 col-sm-offset-2">
                            <a href="#formula">
                                <img src="images/bienestar-social.png" class="img-responsive"/>
                            </a>
                        </div>
                        <div class="col-md-4 col-centered col-sm-4 col-xs-11 ">
                            <a href="#formula">
                                <img src="images/salud.png" class="img-responsive"/>
                            </a>
                        </div>
                    </div>                    
                </div>
            </div>
        </section>

        <section id="formula">
            <div class="view3">

                <div class="container center-block formulario">
                    <div class="row ">
                        <div class="col-md-6 col-xs-12">
                            <div class="panel panel-primary">
                                <div class="panel-heading"><b>Formula tu ley</b></div>
                                <div class="panel-body">   

                                    <h:form id="frmLey" class="form-horizontal"  >
                                        <p:growl id="mess" showDetail="true"  life="8000"  /> 
                                        <p:wizard id="wizard" flowListener="#{leyControlador.onFlowProcess}" showStepStatus="false" widgetVar="wiz">
                                            <p:tab id="ley" title="Ley" >
                                                <div class="panel-group ">
                                                    <label for="tituloLey">Título de la Ley</label>
                                                    <div class="input-group">                                                               
                                                        <div class="input-group-addon"> <i class="fa fa-check"/> </div>
                                                        <p:inputTextarea rows="2" disabled="true"  class="form-control" id="tituloLey" value="#{leyControlador.objLey.titulo}" autoResize="false"
                                                                         p:placeholder="Escribe el título de la ley." required="true" requiredMessage="Campo título es requerido">
                                                            <f:ajax render="msgTituloLey" />                                                    
                                                        </p:inputTextarea> 
                                                    </div>
                                                    <p:messages id="msgTituloLey" showDetail="false"  for="tituloLey" />
                                                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#modalTitulo">Ayuda</button>
                                                </div>
                                                <div class="panel-group ">
                                                    <label for="situacion">Situación</label>
                                                    <div class="input-group">
                                                        <div class="input-group-addon"> <i class="fa fa-check"/> </div>
                                                        <p:inputTextarea rows="2" disabled="true" class="form-control" id="situacion" value="#{leyControlador.objLey.situacion}" autoResize="false"
                                                                         p:placeholder="Describe tu problema que quieres solucionar" required="true" requiredMessage="Campo situación es requerido">
                                                            <f:ajax render="msgSituacion" />
                                                        </p:inputTextarea>
                                                    </div>
                                                    <p:messages id="msgSituacion" showDetail="false"  for="situacion" />
                                                    <button type="button" disabled="true" class="btn btn-primary" data-toggle="modal" data-target="#modalSituacion">Ayuda</button>
                                                </div>
                                                <div class=" panel-group">
                                                    <label for="solucion">Solución</label> 
                                                    <div class="input-group">
                                                        <div class="input-group-addon"> <i class="fa fa-check"/> </div>
                                                        <p:inputTextarea rows="2" disabled="true"  class="form-control" id="solucion" value="#{leyControlador.objLey.solucion}" autoResize="false"
                                                                         p:placeholder="Escribe la solución que tu propones a tu problema." required="true" requiredMessage="Campo solución es requerido">
                                                            <f:ajax render="msgSolucion" />
                                                        </p:inputTextarea>
                                                    </div>
                                                    <p:messages id="msgSolucion" showDetail="false"  for="solucion" />
                                                    <button type="button" disabled="true"  class="btn btn-primary" data-toggle="modal" data-target="#modalSolucion">Ayuda</button>
                                                </div>
                                            </p:tab>
                                            <p:tab id="personal" title="Datos" >
                                                <h:inputHidden value="#{leyControlador.objLey.titulo}" id="LEY"/>
                                                <div class="panel-group">
                                                    <label for="cedula" class="control-label col-md-3">Cédula</label>
                                                    <div class="input-group col-md-8">
                                                        <div class="input-group-addon"> <i class="fa fa-user"/> </div>                                                
                                                        <p:inputText class="form-control col-lg-6" disabled="true"  id="cedula" value="#{leyControlador.objCiudadano.cedula}" p:placeholder="cedula" 
                                                                     required="true" requiredMessage="Campo cédula es requerido" validatorMessage="Cédula debe contener 10 dígitos">
                                                            <f:validateLength minimum="10" maximum="10"  />
                                                            <f:ajax render="msgCedula" event="change" />                                                            
                                                        </p:inputText>
                                                    </div>
                                                    <p:messages id="msgCedula" showDetail="false" for="cedula"  />
                                                </div>
                                                <div class="panel-group">
                                                    <label for="nombres" class="control-label col-md-3">Nombres</label>
                                                    <div class="input-group col-md-8">
                                                        <div class="input-group-addon"> <i class="fa fa-user"/> </div>
                                                        <p:inputText class="form-control" disabled="true"  id="nombres" value="#{leyControlador.objCiudadano.nombres}" p:placeholder="Nombres" 
                                                                     required="true" requiredMessage="Campo nombre es requerido">
                                                            <f:ajax render="msgNombres"  event="change"/>
                                                        </p:inputText>
                                                    </div>
                                                    <p:messages id="msgNombres" showDetail="false"  for="nombres" />
                                                </div>
                                                <div class="panel-group">
                                                    <label for="apellidos" class="control-label col-md-3">Apellidos</label>
                                                    <div class="input-group col-md-8">
                                                        <div class="input-group-addon"> <i class="fa fa-user"/> </div>
                                                        <p:inputText class="form-control" disabled="true"  id="apellidos" value="#{leyControlador.objCiudadano.apellidos}" p:placeholder="Apellidos" 
                                                                     required="true" requiredMessage="Campo apellido es requerido">
                                                            <f:ajax render="msgApellidos" event="change"/>
                                                        </p:inputText>
                                                    </div>
                                                    <p:messages id="msgApellidos" showDetail="false"  for="apellidos" />
                                                </div>
                                                <div class="panel-group">
                                                    <label for="email" class="control-label col-md-3">Email</label>
                                                    <div class="input-group col-md-8">
                                                        <div class="input-group-addon"><i class="fa fa-envelope"/></div>
                                                        <p:inputText class="form-control" disabled="true"  id="email" value="#{leyControlador.objCiudadano.mail}" p:placeholder="example@correo.com" 
                                                                     required="true" requiredMessage="Campo email es requerido" validatorMessage="Formato email inválido">

                                                            <f:validateRegex pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
                                                            <f:ajax render="msgEmail" event="change" />
                                                        </p:inputText>
                                                    </div>
                                                    <p:messages id="msgEmail" showDetail="false" for="email" />
                                                </div>
                                                <div class="panel-group">
                                                    <label for="telefono" class="control-label col-md-3">Teléfono</label>
                                                    <div class="input-group col-md-8">
                                                        <div class="input-group-addon"> <i class="fa-phone-square"/> </div>
                                                        <p:inputText class="form-control" disabled="true"  id="telefono" value="#{leyControlador.objCiudadano.telefono}" p:placeholder="Teléfono" 
                                                                     required="true" requiredMessage="Campo teléfono es requerido" validatorMessage="Teléfono debe contener 10 dígitos">
                                                            <f:validateLength minimum="10" maximum="10" />
                                                            <f:ajax render="msgTelefono" event="change" />
                                                        </p:inputText>
                                                    </div>
                                                    <p:messages id="msgTelefono" showDetail="false" for="telefono"/>
                                                </div>
                                                <p:commandButton id="btnIngresarLey" disabled="true"  process="@this" value="CONFIRMAR Y ENVIAR" oncomplete="limpiarForm()" resetValues="true"
                                                                 class="btn btn-primary right" actionListener="#{leyControlador.insertarLey()}"
                                                                 title="CONFIRMAR Y ENVIAR" update=":frmLey :frmLeyes frmLey mess" >
                                                </p:commandButton>
                                            </p:tab>
                                        </p:wizard>
                                    </h:form>
                                </div>
                            </div>
                            <div class="col-md-12 text-grid">
                                En caso de llegar a la Asamblea, se trabajará en conjunto el Proyecto de Ley con el proponente para su desarrollo.
                            </div>
                        </div>
                        <div class="col-md-6 col-xs-12 text-grid">
                            <div class="row ">
                                <div class="col-md-7 col-xs-7">
                                    <h2> ¡Queremos <br/>que seas parte del <b>Cambio!</b></h2> 
                                </div>
                                <div class="col-md-3 col-md-offset-1 col-sm-3 col-xs-5">
                                    <img src="images/vota-todo.png" class="img-responsive"/>
                                </div>
                            </div>
                            <div class="row" >
                                <div class="col-md-5 pad col-xs-12" >
                                    <h3>Si tu ley es la más votada, me comprometo a <b>Gestionar</b> su <b>Desarrollo</b> y <b>Cumplimiento.</b></h3>
                                </div>                                
                                <div class="col-md-7 col-md-offset-0 col-sm-6 col-xs-9 col-xs-offset-1">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <img src="images/eduardo-granizo.png" class="img-responsive"/>
                                        </div>
                                    </div>
                                    <div class="row" >
                                        <div class="col-md-4 col-md-offset-4">
                                            #EduardoGranizo2017

                                        </div>
                                    </div>
                                    <div class="row" >
                                        <div class="col-md-8 col-md-offset-2">
                                            <div class="text-mid">Eduardo</div> 
                                        </div> 
                                    </div>
                                    <div class="row"> 
                                        <div class="col-md-10">
                                            <h1 class="text-full">Granizo</h1>
                                        </div>
                                    </div>
                                    <div class="row"> 
                                        <div class="col-md-6 col-md-offset-6">
                                            <div class="text-asa">ASAMBLEISTA</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="publicar">
            <div class="view2">
                <div class="container text-center" >
                    <div class="row">
                        <div class="col-md-3 col-sm-3 col-xs-6 col-md-offset-0 col-sm-offset-0 col-xs-offset-3  ">
                            <div style="padding: 10px;">
                                <img src="images/voto-plancha.png" class="img-responsive"/>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                            <div class="row page4">
                                <div class="col-md-12">
                                    <h1 class="h1-font"> ¡Gracias por contarnos<br/> tu ley!</h1>
                                </div>
                            </div>
                            <div class="row " style="color: white;">
                                <div class="col-md-12">
                                    <h4>No te olvides compartir con tus amigos esta iniciativa, para que todos seamos parte y logremos el cambio que merecemos. ¡Juntos estaremos mejor!</h4>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-8 col-md-offset-2">                           
                                    <p:commandLink  onclick="share('Crea tu propia ley')" >
                                        <img src="images/compartir.png" class="img-responsive"/>
                                    </p:commandLink>                         
                                </div>
                            </div>
                            <div class="row icono" >
                                <div class="col-md-8 col-md-offset-2 icono">
                                    <a href="#votar" class="btn-circle page-scroll">
                                        <i class="fa fa-angle-double-down animated"/>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 col-sm-3 col-xs-8 juntos col-md-offset-0 col-sm-offset-0 col-xs-offset-2">
                            <img src="images/paco.png" class="img-responsive"/>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="votar">
            <div class="view2">
                <div class="container text-center" >
                    <div class="row heading">
                        <div class="col-md-10 col-md-offset-1">
                            <h1> Vota por la ley que más te guste</h1>
                        </div>
                    </div>
                    <h:form id="frmLeyes">
                        <p:growl id="growl" showDetail="true"  life="8000" /> 
                        <div class="row" style="vertical-align: middle;">
                            <ui:repeat var="leyes" value="#{leyControlador.lstLey}">
                                <div class="col-md-4 features" id="#{leyes.codigo}">
                                    <div class="row">
                                        <h:commandLink id="Button" styleClass="btn-info" onclick="$('#dialogLeyes').modal('show');" >
                                            <div class="box">
                                                <h:outputLabel value="#{leyes.titulo}"/>
                                                <h:inputHidden value="#{leyes.titulo}" id="Titulo"/> 
                                                <br/>
                                                <h:outputLabel value="votos #{leyes.votos} " class="votos "/>
                                            </div>
                                            <f:setPropertyActionListener value="#{leyes}" target="#{leyControlador.selLey}"/>
                                            <f:ajax execute="@this" render=":frmLeyDetalle"/>
                                        </h:commandLink>
                                    </div>
                                    
                                    <div class="row">     
                                        <div class="col-md-4 col-md-offset-1 col-sm-4 col-md-offset-1 col-xs-4 col-xs-offset-1">
                                            <p:commandLink class="btn" action="#{leyControlador.votar()}" update=":frmLeyes" value="votar" process="@this">                                        
                                                <f:setPropertyActionListener value="#{leyes}" target="#{leyControlador.selLey}"/>
                                            </p:commandLink>
                                        </div>
                                        <div class="col-md-5 col-sm-5 col-xs-6">
                                            <p:commandLink  onclick="shareLey('#{leyes.titulo}')" class="share">
                                                <i class="fa fa-facebook"/>
                                                <strong>Compartir</strong>
                                            </p:commandLink>
                                        </div>
                                    </div>

                                </div>
                            </ui:repeat>                            
                        </div>
                    </h:form>
                </div>
            </div>
        </section>


        <!-- Modal Situación -->
        <div id="modalSituacion" class="modal fade" role="dialog">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">×</button>
                        <h4 class="modal-title">Situación</h4>
                    </div>
                    <div class="modal-body">
                        <p>Se describe la situación existente (condiciones que la originan, causas, fuentes de conocimientos del problema,
                            a quienes afecta el problema, con que intensidad), si hay antecedentes legislativos, parlamentarios, doctrinarios 
                            (bibliotecas, publicaciones, base de datos, estadísticas, etc), jurisprudencias (sistemas de información jurídica).</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Modal Titulo -->
        <div id="modalTitulo" class="modal fade" role="dialog">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">×</button>
                        <h4 class="modal-title">Título</h4>
                    </div>
                    <div class="modal-body">
                        <p>Escribe en palabras cortas el título de tu ley. Ejemplo: Ley para el trato de los perritos de la calle.</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                    </div>
                </div>

            </div>
        </div>
        <!-- Modal Solucion -->
        <div id="modalSolucion" class="modal fade" role="dialog">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">×</button>
                        <h4 class="modal-title">Solución</h4>
                    </div>
                    <div class="modal-body">
                        <p>Tu idea tiene que ser clara, precisa y que la puedan entender, sin lugar a ninguna duda de 
                            interpretación, tanto  los ciudadanos que debemos cumplirla como quienes deben hacerla cumplir</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Modal Leyes-->
        <div id="dialogLeyes" class="modal fade" role="dialog">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <h:form id="frmLeyDetalle" >
                        <div class="modal-header">
                            <h:commandLink  onclick="$('#dialogLeyes').modal('hide')" type="reset" styleClass="close">
                                ×
                                <p:ajax update="frmLeyDetalle" resetValues="true" />
                            </h:commandLink>
                            <h4 class="modal-title"> 
                                <h:outputLabel id="txtTitulo"  value="#{leyControlador.selLey.titulo}"/>
                            </h4>
                        </div>
                        <div class="modal-body" style="text-align: justify">
                            <fieldset>
                                <div class="form-group row">
                                    <h:outputLabel value="Situación" for="txtSituacion" styleClass="col-md-2 control-label"/>
                                    <div class="col-md-10 col-md-offset-1">                                                
                                        <p:outputLabel  id="txtSituacion" styleClass="control-label" value="#{leyControlador.selLey.situacion}"/>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <h:outputLabel value="Solución" for="txtSolucion" styleClass="col-md-2 control-label"/>
                                    <div class="col-md-10 col-md-offset-1">                                                    
                                        <p:outputLabel  id="txtSolucion"  styleClass="control-label"  value="#{leyControlador.selLey.solucion}"/>
                                    </div>
                                </div>
                            </fieldset>   
                        </div>
                        <div class="modal-footer">
                            <h:commandLink  onclick="$('#dialogLeyes').modal('hide')" type="reset" styleClass="btn btn-default" value="cerrar" >
                                <p:ajax update="frmLeyDetalle" resetValues="true" />
                            </h:commandLink>
                        </div>

                    </h:form>
                </div>
            </div>
        </div>
        <!-- Modal Ingreso-->
        <div id="modalIngreso" class="modal fade" role="dialog">
            <div class="modal-dialog modal-sm">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">×</button>
                        <h4 class="modal-title"></h4>
                    </div>
                    <div class="modal-body">
                        <p>¡Tu Ley ha sido registrada!</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal"><a href="index.xhtml#publicar">Cerrar</a></button>
                    </div>
                </div>
            </div>
        </div>
        <p:dialog modal="true" widgetVar="dlgStatus" header="Procesando" draggable="false" closable="false" 
                  resizable="false"> 
            <p:graphicImage value="images/load.gif" />  
        </p:dialog>
    </h:body>
</html>